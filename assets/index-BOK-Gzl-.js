import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-CRzvxVhs.js";import{j as h,e as O,u as T}from"./index-BP_jaNWU.js";import{d as w,Y as F,a8 as E,ai as $,Z as _,r as f,ad as A,a as G,a0 as j,P as D,c as a,_ as d,u as e,a1 as n,G as J,a5 as L,a6 as P}from"./vue-B71fNrMB.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{$ as Y,a0 as Z,I as H,U as K,a1 as M,a5 as Q,p as W,a as X}from"./antd-DuJ4DLpV.js";import"./vxe-JyaaYH4R.js";const ee="/v3-admin-vite/assets/logo-text-2-y4GmJqxb.png";function se(){return h({url:"auth/captcha",method:"get"})}function ae(o){return h({url:"auth/login",method:"post",data:o})}const oe=w({__name:"Owl",props:{closeEyes:{type:Boolean}},setup(o){const r=o;return(i,l)=>(_(),F("div",{class:E(["owl",{"owl-password":r.closeEyes}])},[...l[0]||(l[0]=[$('<div class="hand-down-left" data-v-9d98ae89></div><div class="hand-down-right" data-v-9d98ae89></div><div class="hand-up-left" data-v-9d98ae89></div><div class="hand-up-right" data-v-9d98ae89></div><div class="close-eyes" data-v-9d98ae89></div>',5)])],2))}}),te=y(oe,[["__scopeId","data-v-9d98ae89"]]);function ne(){const o=f(!1);return{isFocus:o,handleBlur:()=>{o.value=!1},handleFocus:()=>{o.value=!0}}}const re={class:"login-container"},le={class:"login-card"},ue={class:"content"},de=w({__name:"index",setup(o){const r=L(),i=P(),l=O(),x=T(),{isFocus:b,handleBlur:B,handleFocus:k}=ne(),R=A("loginFormRef"),c=f(!1),g=f(""),t=G({username:"admin",password:"12345678",code:""}),q={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]};function C(u){c.value=!0,ae(u).then(({data:s})=>{l.setToken(s.token),i.push(r.query.redirect?decodeURIComponent(r.query.redirect):"/")}).catch(()=>{v(),t.password=""}).finally(()=>{c.value=!1})}function S(){X.error("表单校验不通过")}function v(){t.code="",g.value="",se().then(u=>{g.value=u.data})}return v(),(u,s)=>{const U=H,p=Z,I=M,N=W,V=Y;return _(),F("div",re,[e(x).showThemeSwitch?(_(),j(z,{key:0,class:"theme-switch"})):D("",!0),a(te,{"close-eyes":e(b)},null,8,["close-eyes"]),d("div",le,[s[3]||(s[3]=d("div",{class:"title"},[d("img",{src:ee})],-1)),d("div",ue,[a(V,{ref_key:"loginFormRef",ref:R,model:e(t),rules:q,onFinish:C,onFinishFailed:S},{default:n(()=>[a(p,{name:"username"},{default:n(()=>[a(U,{value:e(t).username,"onUpdate:value":s[0]||(s[0]=m=>e(t).username=m),placeholder:"用户名",tabindex:"1",size:"large"},{prefix:n(()=>[a(e(K))]),_:1},8,["value"])]),_:1}),a(p,{name:"password"},{default:n(()=>[a(I,{value:e(t).password,"onUpdate:value":s[1]||(s[1]=m=>e(t).password=m),placeholder:"密码",type:"password",tabindex:"2",size:"large","show-password":"",onBlur:e(B),onFocus:e(k)},{prefix:n(()=>[a(e(Q))]),_:1},8,["value","onBlur","onFocus"])]),_:1}),a(p,null,{default:n(()=>[a(N,{block:"",loading:e(c),type:"primary","html-type":"submit",size:"large"},{default:n(()=>[...s[2]||(s[2]=[J(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}}),ge=y(de,[["__scopeId","data-v-94a6b891"]]);export{ge as default};
