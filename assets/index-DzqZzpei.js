import{j as G}from"./index-DB3K13GT.js";import{a as D,d as H,ad as P,r as f,w as J,Y as L,_ as c,c as a,a1 as o,h as k,u as t,H as Q,Z as Y,G as g}from"./vue-B71fNrMB.js";import{Q as Z,R as _}from"./vxe-JyaaYH4R.js";import{Q as W,p as X,V as K,I as ee,W as te,X as ae,Y as ne,w as oe,Z as le,$ as re,a0 as se,a1 as ie,a2 as ue,a as de}from"./antd-DuJ4DLpV.js";function pe(v){return G({url:"tables",method:"get",params:v})}const me={total:0,currentPage:1,pageSizes:[10,20,50],pageSize:20,layout:"total, sizes, prev, pager, next, jumper"};function fe(v={}){const s=D({...me,...v});return{paginationData:s,handleCurrentChange:i=>{s.currentPage=i},handleSizeChange:i=>{s.pageSize=i}}}const ce={class:"app-container"},ge={class:"header"},_e={class:"left"},ve={class:"right"},he={class:"pagination"},ye=H({name:"VxeTable",__name:"index",setup(v){const s=P("formRef"),y=P("tableRef"),{paginationData:r,handleCurrentChange:i}=fe(),l=D({username:"",phone:"",date:void 0}),x=f([]),h=f(!1);function S(){h.value=!0,pe({currentPage:r.currentPage,size:r.pageSize,username:l.username,phone:l.phone}).then(d=>{x.value=d.data.list,r.total=d.data.total}).finally(()=>{h.value=!1})}function z(){if(r.currentPage===1){S();return}i(1)}function R(){l.username="",l.phone="",l.date=void 0,z()}function U(d){m.value=!0,u.value=JSON.parse(JSON.stringify(d))}function T(d){return new Promise(e=>{setTimeout(()=>{de.success("删除成功"),e(!0)},3e3)})}function A(){}const u=f({username:"",password:"",remember:!0}),N={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},m=f(!1),w=f(!1);function O(){s.value?.validate().then(()=>{w.value=!0})}function V(){w.value=!1,s.value?.resetFields()}return J([()=>r.currentPage,()=>r.pageSize],S,{immediate:!0}),(d,e)=>{const p=X,C=ee,q=te,F=le,M=ne,b=se,$=ie,B=ue,I=re,j=oe;return Y(),L("div",ce,[c("div",ge,[c("div",_e,[a(p,{type:"primary",icon:k(t(W)),onClick:e[0]||(e[0]=n=>m.value=!0)},{default:o(()=>[...e[10]||(e[10]=[g(" 新增 ",-1)])]),_:1},8,["icon"]),a(p,{type:"primary",icon:k(t(K)),danger:"",onClick:A},{default:o(()=>[...e[11]||(e[11]=[g(" 批量删除 ",-1)])]),_:1},8,["icon"])]),c("div",ve,[a(C,{value:t(l).username,"onUpdate:value":e[1]||(e[1]=n=>t(l).username=n),valueModifiers:{trim:!0},placeholder:"请输入用户名",style:{width:"200px"}},null,8,["value"]),a(C,{value:t(l).phone,"onUpdate:value":e[2]||(e[2]=n=>t(l).phone=n),valueModifiers:{trim:!0},placeholder:"请输入手机号",style:{width:"200px"}},null,8,["value"]),a(q,{value:t(l).date,"onUpdate:value":e[3]||(e[3]=n=>t(l).date=n),placeholder:"请输入手机号",options:[{value:1e4}],style:{width:"200px"}},null,8,["value"]),a(p,{type:"primary",onClick:z},{default:o(()=>[...e[12]||(e[12]=[g(" 查询 ",-1)])]),_:1}),a(p,{icon:k(t(ae)),onClick:R,title:"重置"},null,8,["icon"])])]),a(t(Z),{ref_key:"tableRef",ref:y,data:t(x),align:"center","row-config":{keyField:"id",isCurrent:!0,isHover:!0},"checkbox-config":{reserve:!0},loading:t(h)},{default:o(()=>[a(t(_),{type:"checkbox",width:"70"}),a(t(_),{field:"id",title:"id"}),a(t(_),{field:"username",title:"Name"}),a(t(_),{field:"phone",title:"Sex"}),a(t(_),{field:"email",title:"Age"},{default:o(({row:n})=>[a(p,{type:"link",onClick:E=>U(n)},{default:o(()=>[...e[13]||(e[13]=[g(" 编辑 ",-1)])]),_:1},8,["onClick"]),a(F,{title:"确认删除?","ok-text":"确认","cancel-text":"取消",placement:"topRight",onConfirm:E=>T(n)},{default:o(()=>[a(p,{type:"link",danger:""},{default:o(()=>[...e[14]||(e[14]=[g(" 删除 ",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data","loading"]),c("div",he,[a(M,{current:t(r).currentPage,"onUpdate:current":e[4]||(e[4]=n=>t(r).currentPage=n),"page-size":t(r).pageSize,"onUpdate:pageSize":e[5]||(e[5]=n=>t(r).pageSize=n),total:t(r).total,"show-size-changer":"","page-size-options":["20","50","100","200"],"show-total":n=>`共 ${n} 条`,"show-quick-jumper":"",onChange:t(i)},null,8,["current","page-size","total","show-total","onChange"])]),a(j,{open:t(m),"onUpdate:open":e[9]||(e[9]=n=>Q(m)?m.value=n:null),centered:"","confirm-loading":t(w),onOk:O,onCancel:V},{title:o(()=>[...e[15]||(e[15]=[c("div",null,"Draggable Modal",-1)])]),default:o(()=>[a(I,{model:t(u),ref_key:"formRef",ref:s,"label-col":{span:6},"wrapper-col":{span:16},autocomplete:"off",rules:N},{default:o(()=>[a(b,{label:"Username",name:"username"},{default:o(()=>[a(C,{value:t(u).username,"onUpdate:value":e[6]||(e[6]=n=>t(u).username=n),placeholder:"请选择日期"},null,8,["value"])]),_:1}),a(b,{label:"Password",name:"password"},{default:o(()=>[a($,{value:t(u).password,"onUpdate:value":e[7]||(e[7]=n=>t(u).password=n),placeholder:"请选择日期"},null,8,["value"])]),_:1}),a(b,{label:"date",name:"date"},{default:o(()=>[a(B,{value:t(l).date,"onUpdate:value":e[8]||(e[8]=n=>t(l).date=n),placeholder:"请选择日期",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading"])])}}});export{ye as default};
